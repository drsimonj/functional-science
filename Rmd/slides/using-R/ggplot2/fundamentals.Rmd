---
title: 'Using R: ggplot2 fundamentals'
author: "Dr Simon Jackson"
date: "Knit on `r format(Sys.time(), '%d %B, %Y')`"
output: ioslides_presentation
---

```{r setup, echo = FALSE, warning = FALSE}
knitr::opts_knit$set(root.dir = '../../../../')
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "figs/",
  fig.height = 3,
  fig.width = 3,
  fig.align = "center"
)
```

## What/Why ggplot2?

`ggplot2` is a package for **plotting**.

Many would consider it to be R's most powerful data vizualisation tool.

It's incredibly flexible, giving you control over almost every aspect of a plot.

But with flexibility comes the challenge of mastery.

## Thinking in ggplot2

Using `ggplot2` often requires a mental shift when it comes to plotting.

When we use tools like SPSS or Excel, we often try various plotting methods until something gives us what we want. But we seldom play with the data.

When it comes to ggplot2, we're forced (in a good way) to manipulate the data. This can take some time to get used to.

## Basic setup

(Install and) Load the `ggplot2` package:

```{r}
# install.packages("ggplot2")
library(ggplot2)
```

A ggplot2 plot begins with:

```{r, eval = F}
ggplot()
```

## Geoms

**Geoms** are visual elements that represent your data. For example, points, bars, and lines.

Geoms are created with functions of the form `geom_*()`. For example, `geom_point()`

We add geoms in layers to our plot using `+`. E.g.

```{r, eval = F}
ggplot() + geom_point()
```

## Adding data

ggplot2 references data frames using the `data` arguement.

This can be used within `ggplot()` or `geom_*()`

Examples:

```{r, eval = F}
ggplot(data = mtcars) + geom_point()

ggplot() + geom_point(data = mtcars)
```

## Aesthetics

**Aesthetics** define the variables to be mapped to aspects of geoms. For example, variables to define x and y coordinates, colour, and shape.

Aesthetics are mapped to geoms within `ggplot()` or geom functions via the function `aes()`.

Different aesthetics can be used for different geoms. Common ones include `x`, `y`, `color`, `shape`.

We reference variable names **without** quotation marks.

## Aesthetics

```{r}
ggplot(mtcars, aes(x = hp, y = mpg)) + geom_point()
```

## Aesthetics

```{r}
ggplot() + geom_point(data = mtcars, aes(x = hp, y = mpg))
```

## Using ggplot() or geom_*()?

When data or aesthetics are placed in `ggplot()`, they are be used by all following geom layers that don't override those values.

```{r}
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point() +
  geom_line()
```

## Using ggplot() or geom_*()?

Data or aesthetics used within `geom_*()` will be used by that geom only.

```{r}
ggplot() +
  geom_point(data = mtcars, aes(x = hp, y = mpg)) +
  geom_line()
```

## Examples

Mapping `color` to `hp`

```{r}
ggplot(mtcars, aes(x = hp, y = mpg, color = hp)) +
  geom_point() +
  geom_line()
```

## Examples

Mapping `color` to `hp` for points ONLY...

```{r}
ggplot(mtcars, aes(x = hp, y = mpg)) +
  geom_point(aes(color = hp)) +
  geom_line()
```



